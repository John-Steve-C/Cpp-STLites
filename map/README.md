# STLite-Map

## 实现细节

* 算法要求：
  * **B班**：AVL AA 红黑树三选一
  * **A班**：红黑树

`sjtu::map`的最终提交仅需要提交`map.hpp`的内容。具体细节可以查看下发的`map.hpp`框架。

可能需要注意的细节：

- 你的程序将会受到一定程度的鲁棒性检测
- 提供了类似`type_traits`的`toy_traits_test`的测试（在`data`文件夹中），对`type_traits`感兴趣的同学可以试着完成一下。

## 分数构成

OJ测试部分占比：80%，code review部分占比：20% (16%基础问题+4%bonus)

以基础的二叉搜索树完成此题，最终得分为`0.4*以上得分`。

以算法要求外的方法完成此题，最终得分为`0.7*以上得分`。

bonus可以是对容器某个行为的优化，type_traits相关应用（学习、完成`test`、应用等）或其他有创意的想法。在`code review`时展示即可。

如果在CR时，发现有任何违规行为（包括但不限于使用其它头文件、使用非常规方法通过测试点），你最终的得分都有可能为 $0$ 分。

## 截止日期

4月9日（第七周周六）23:00前

---

## 编程记录

- 要考虑迭代器失效的问题？
- 换一种写法，先写好红黑树类，再新定义一个map类（其中封装好红黑树），这样写比较好。
  
  之前写 `vector` 和 `priority_queue` 的时候，都是直接把线性表和大根堆当成了目标类，不具有普适性。
- 要尽量采用统一的命名规范，比如说变量类型(全部大写/首字母大写)、变量名(每个单词首字母大写)、函数名(小写 + 下划线)
- 颜色的修改在旋转操作中实现

  如果要通过指针来修改其指向的变量，指针那就没有必要引用传递?
- 记得要用给定的 `Compare` 函数来比较大小 

2022.3.27

### To do list

- [ ] 重写 `RedBlackTree` 类
- [x] 迭代器
- [ ] `exception` 异常处理

- 昨天写数学和物理，没有写代码
- 今天先把 `remove` 写完，据说书上的代码是错的。
- ~~我一部分是抄书的，一部分又是自己瞎jb写的，肯定会出大问题~~ 
- 赶紧把迭代器写好，开始调试。
- `iter++`指的是访问下一个比key大的位置,要在树上寻找,所以也要保存一个指向本身的 `*id` 指针

  所以`NODE` 必须写成三叉链表，还要记录一个父节点

  也就是说，写好的红黑树要 **大改** 了...
- 感觉 `bug` 非常多啊...还在写就感觉不对了
- 因为一般在 `STL` 中，要求 `end` 指向的是最后一个位置的后面。又因为红黑树的节点不是连续的，所以要设置一个 `end = nullptr` 节点
- 偷懒小技巧：`NODE` 是红黑树的内嵌类，`map` 无法访问，所以可以用 `auto` 代替 `NODE`
- 还是对红黑树的实现，不是很理解
- 大致完成了 `map` 和 `iterator` 类
- 实在不行，还有最后的方法：参考吴老师的代码...